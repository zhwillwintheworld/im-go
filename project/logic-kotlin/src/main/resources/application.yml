# 无 HTTP 服务器，通过 NATS 通信
spring:
    main:
        web-application-type: none  # 关键：禁用 Web 服务器

    application:
        name: im-logic

    # R2DBC - 响应式 PostgreSQL
    r2dbc:
        url: r2dbc:postgresql://localhost:5432/im
        username: postgres
        password: password
        pool:
            initial-size: 10
            max-size: 50
            max-idle-time: 30m

    # Reactive Redis
    data:
        redis:
            host: localhost
            port: 6379
            lettuce:
                pool:
                    max-active: 50
                    max-idle: 10

# NATS 配置
nats:
    server:
        url: nats://localhost:4222
    connection:
        max-reconnects: -1  # 无限重连
        reconnect-wait: 2s

logging:
    level:
        com.example.im: DEBUG
        io.nats: INFO
        io.r2dbc: DEBUG
